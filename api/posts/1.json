{"total":13,"pageSize":10,"pageCount":2,"data":[{"title":"","slug":"QOS服务质量配置","date":"2019-08-21T10:54:39.418Z","updated":"2019-08-21T10:54:39.667Z","comments":true,"path":"api/articles/QOS服务质量配置.json","excerpt":"","keywords":null,"cover":"https://s2.ax1x.com/2019/08/21/mUre7F.png","content":"<h1 id=\"QOS服务质量配置\"><a href=\"#QOS服务质量配置\" class=\"headerlink\" title=\"QOS服务质量配置\"></a>QOS服务质量配置</h1><p><img src=\"https://s2.ax1x.com/2019/08/21/mUre7F.png\" alt></p>\n<p>QOS（（服务质量）是网络的一种安全机制, 是一种用于解决网络延迟和阻塞等问题的技术，包括传输的带宽、传送的时延、数据的丢包率等。在网<br>络中可以通过保证传输的带宽、降低传送的时延、降低数据的丢包率以及时延抖动等措施来提高服务质量。</p>\n<p>CBWFQ配置：（CBWFQ：基本类型的加权公平排队。CBWFQ能根据用户定义识别出某种类流，并为该条流分配一定的权重）<br>Router(config)#class-map http_ftp  //创建名为http_ftp分类表，并进入分类表模式<br>Router(config-cmap)#match protocol http //匹配http协议<br>Router(config-cmap)#match protocol ftp  //匹配ftp协议建立<br>Router(config)#policy-map duilie //创建名为duilie的策略表，并进入策略表模式<br>Router(config-pmap)#class http_ftp //建立名为http_ftp分类表<br>Router(config-pmap-c)#bandwidth 512 //设置带宽为512<br>Router(config-pmap-c)#exit<br>Router(config-pmap)#class class-default  //默认类<br>Router(config-pmap-c)#fair-queue      //设置端口队列<br>Router(config-pmap-c)#int f0/1<br>Router(config-if)#service-policy output duilie 应用队列策略<br>Router#show policy-map   //查看CBWFQ的配置情况</p>\n<p>PQ的配置：（PQ：优先权排队。可以配置高（High）、中（Middle）、普通（Normal）、低（Low）四种通信优先级，优先权级别高的通信总会比优先权级别低的通信提前得到服务。）<br>使用PQ设置来保证web服务优先传输，ftp服务 优先级设置为最低：<br>Router(config)#ip access-list extended 101<br>Router(config-ext-nacl)#permit tcp any any eq www<br>Router(config)#ip access-list extended 102<br>Router(config-ext-nacl)#permit tcp any any eq ftp<br>Router(config)#priority-list 1 protocol ip high list 101  //根据协议类型排队的优先级<br>Router(config)#priority-list 1 protocol ip low list 102<br>Router(config-if)#priority-group 1 将优先级列表应用到接口上<br>Router#show queueing   //查看PQ配置情况</p>\n<p>CQ的配置：<br>设置ftp服务的优先级发送在www服务前发送<br>Router(config)#access-list 102 permit tcp any any eq ftp<br>Router(config)#access-list 103 permit tcp any any eq www<br>Router(config)#queue-list 1 protocol ip 1 list 102<br>Router(config)#queue-list 1 protocol ip 2 list 103<br>Router(config-if)#priority-group 1<br>Router#show queueing<br>Current custom queue configuration:</p>\n<p>List Queue Args<br>1 1 protocol ip list 102<br>1 2 protocol ip list 103<br>Current random-detect configuration:</p>\n","text":"QOS服务质量配置 [Figure] Current random-detect configuration:","link":"","raw":null,"photos":[],"categories":[],"tags":[]},{"title":"","slug":"PPP点到点协议","date":"2019-08-21T10:47:51.926Z","updated":"2019-08-21T10:47:52.180Z","comments":true,"path":"api/articles/PPP点到点协议.json","excerpt":"","keywords":null,"cover":"https://s2.ax1x.com/2019/08/21/mUDcWR.png","content":"<h1 id=\"PPP点到点协议\"><a href=\"#PPP点到点协议\" class=\"headerlink\" title=\"PPP点到点协议\"></a>PPP点到点协议</h1><p><img src=\"https://s2.ax1x.com/2019/08/21/mUDcWR.png\" alt></p>\n<p>pap与 chap配置：<br>R1与R2之间配置pap认证：<br>R1(config)#username YY password ccie                   设置本地账户和密码<br>R1(config)#int s2/0                                    进入端口<br>R1(config-if)#encapsulation ppp                        开启ppp封装<br>R1(config-if)#ppp authentication pap                   ppp采取pap认证方式<br>R2(config)#int s2/0<br>R2(config-if)#encapsulation ppp<br>R2(config-if)#ppp pap sent-username YY password  ccie  发送账户和密码进行认证<br>chap的三次握手：<br>R2发送一个随机值给R1，R1收到后将随机值和chap认证中配置的密码cisco进行hash运算，<br>然后将自己chap配置的用户名ccie和hash值发给R2，R2检查用户名是否为自己配置的ccie，<br>并将自己的发送的随机值和自己配置的认证密码cisco做hash运算，结果一直则说明R1认证成功。<br>R2与R3配置chap双向项认证：<br>R2(config)#username R3 password  ccie<br>R2(config-if)#int s3/0<br>R2(config-if)#encapsulation ppp<br>R2(config-if)#ppp authentication  chap<br>R3(config)#username R2 PAssword ccie<br>R3(config)#int s2/0<br>R3(config-if)#encapsulation ppp<br>R3(config-if)#ppp authentication chap<br>R2与R3配置单项向认证<br>R2(config)#username R3 password  ccie<br>R2(config-if)#int s3/0<br>R2(config-if)#encapsulation ppp<br>R2(config-if)#ppp authentication  chap<br>R3(config)#int s2/0<br>R3(config-if)#encapsulation ppp<br>在chap认证中如果你设置的认证双方的用户名不是对方的设备名，那麽就要在最后就上这两个语句<br>R3(config-if)#ppp chap hostname 加上用户名<br>R3(config-if)#ppp chap password 加上用户密码</p>\n","text":"PPP点到点协议 [Figure] R3(config-if)#ppp chap password 加上用户密码","link":"","raw":null,"photos":[],"categories":[],"tags":[]},{"title":"","slug":"NAT和PAT","date":"2019-08-21T10:36:17.465Z","updated":"2019-08-21T10:43:21.228Z","comments":true,"path":"api/articles/NAT和PAT.json","excerpt":"","keywords":null,"cover":"https://s2.ax1x.com/2019/08/21/mUwIoj.png","content":"<h1 id=\"NAT和PAT\"><a href=\"#NAT和PAT\" class=\"headerlink\" title=\"NAT和PAT:\"></a>NAT和PAT:</h1><p><img src=\"https://s2.ax1x.com/2019/08/21/mUwIoj.png\" alt><br>IPV4 可用的地址2^-2=40亿<br>NAT的作用：<br>1、一个解决网络地址不足的问题<br>2、将局域网络隐藏在共有网络内，增加网络的安全性。<br>三种NAT类型：<br>静态NAT<br>动态NAT<br>过载NAT<br>端口地址翻译（PAT）</p>\n<p>静态NAT配置<br>Router(config)#ip nat inside source static  192.168.0.1 61.1.1.1<br>Router(config)#int f0/0.1<br>Router(config-subif)#ip nat in<br>Router(config-subif)#ip nat inside<br>Router(config-subif)#int f0/0.2<br>Router(config-subif)#ip nat inside<br>Router(config-subif)#int s1/0<br>Router(config-if)#ip nat outside<br>Router(config-if)#exit<br>动态NAT配置：<br> 公网地址池：61.1.1.3-61.1.1.8<br> Router(config)#ip nat pool a 61.1.1.3 61.1.1.8 netmask 255.255.255.0<br> Router(config)#access-list 1 permit 192.168.0.1 255.255.255.0<br> Router(config)#ip nat inside source list 1 pool a<br>配置过载NAT：<br>Router(config)#int f0/0.1<br>Router(config-subif)#ip nat in<br>Router(config-subif)#ip nat inside<br>Router(config-subif)#int f0/0.2<br>Router(config-subif)#ip nat inside<br>Router(config-subif)#int s1/0<br>Router(config-if)#ip nat outside<br>Router(config)#access-list 1 permit 192.168.0.1 255.255.255.0<br>Router(config)#ip nat inside source list 1 interface overload</p>\n","text":"NAT和PAT: [Figure] Router(config)#ip nat inside source list 1 interface overload","link":"","raw":null,"photos":[],"categories":[],"tags":[]},{"title":"","slug":"单臂路由、三层交换机实现vlan间通信","date":"2019-08-20T10:32:04.765Z","updated":"2019-08-20T10:32:05.054Z","comments":true,"path":"api/articles/单臂路由、三层交换机实现vlan间通信.json","excerpt":"","keywords":null,"cover":"https://s2.ax1x.com/2019/08/20/mYCy2d.png","content":"<hr>\n<h2 id=\"配置端口安全-虚拟局域网技术-三层交换机实现不同vlan间的通信-单臂路由实现vlan间的通信\"><a href=\"#配置端口安全-虚拟局域网技术-三层交换机实现不同vlan间的通信-单臂路由实现vlan间的通信\" class=\"headerlink\" title=\"配置端口安全+虚拟局域网技术+三层交换机实现不同vlan间的通信+单臂路由实现vlan间的通信\"></a>配置端口安全+虚拟局域网技术+三层交换机实现不同vlan间的通信+单臂路由实现vlan间的通信</h2><p>配置端口安全：限制最大连接数1.如果超过1就关闭窗口</p>\n<p>Switch#config t</p>\n<p>Switch(config)#int f0/1</p>\n<p>Switch(config-if)#sw mode access  （设置端口模式为接入模式）</p>\n<p>Switch(config-if)#switchport port-security</p>\n<p>Switch(config-if)#switchport port-security maximum 1</p>\n<p>Switch(config-if)#switchport port-security violation shutdown</p>\n<p>配置端口安全：绑定MAC地址如果违规就关闭窗口</p>\n<p>Switch(config)#int f 0/2</p>\n<p>Switch(config-if)#sw mo acc（设置端口模式为接口模式）</p>\n<p>Switch(config-if)#switchport port-security</p>\n<p>Switch(config-if)#switchport port-security mac-address 0001.97C4.B26E（设置固定的MAC地址，只允许它访问）</p>\n<p>Switch(config-if)#switchport port-security violation shutdown（设置如果不是规定的MAC地址就关闭窗口 f0/2）</p>\n<p>Vlan（虚拟局域网）技术：</p>\n<p>1、默认情况下交换机的所有端口都在vlan1中</p>\n<p>Switch#sh vlan brief 或者Switch#sh vlan(查看交换机vlan)</p>\n<p>修改用户名：Switch(config)#hostname SW1</p>\n<p>创建两个vlan以及名字</p>\n<p>SW1(config)#vlan 10</p>\n<p>SW1(config-vlan)#</p>\n<p>SW1(config-vlan)#name rsb</p>\n<p>SW1(config-vlan)#vlan 20</p>\n<p>SW1(config-vlan)#name xsb</p>\n<p>修改用户名</p>\n<p>SW2(config)#vlan 10</p>\n<p>SW2(config-vlan)#name rsb</p>\n<p>SW2(config-vlan)#vlan 20</p>\n<p>SW2(config-vlan)#name xsb</p>\n<p>将对应端口放入对应的vlan</p>\n<p>二交换机是不能实现不同广播之间通信的，如果要实现不同的vlan进行通信必须要是有三层设备（路由器或者三层交换）</p>\n<p>方法一：使用三层交换机进行不同的vlan的通信。</p>\n<p>第一步：先在三层交换机上面划分vlan间的通信,先修改用户为SW3</p>\n<p><img src=\"https://s2.ax1x.com/2019/08/20/mYCy2d.png\" alt></p>\n<p>第二步修改trunk,但是显示需要封装，所以先去封装，再次trunk模式</p>\n<p><img src=\"https://s2.ax1x.com/2019/08/20/mYiCtS.png\" alt></p>\n<p><img src=\"https://s2.ax1x.com/2019/08/20/mYiA6s.png\" alt></p>\n<p>为svi虚拟接口配置IP地址分别作为不同的vlan的网关并且开启路由功能然后为计算机配置网关地址（IP一定要与网管地址的网络位相同）</p>\n<p><img src=\"https://s2.ax1x.com/2019/08/20/mYie00.png\" alt></p>\n<p>方法二:</p>\n<p>使用路由器实现vlan间的通信（单臂路由）</p>\n<p><img src=\"https://s2.ax1x.com/2019/08/20/mYiukT.png\" alt></p>\n<p>第一步：划分vlan</p>\n<p>第二部：将端口加入vlan（将1到10的端口都加入到vlan100中，11到22的多安康都加入到vlan20中）</p>\n<p>第三部：设置trunk：</p>\n<p>第四部：将路由端口开启</p>\n<p>第五步：开启子接口并封装为dot1q标准，设置IP地址分别为vlan100 vlan200网关</p>\n<p>R1(config)#int f0/0.100（跟vlan100对应）</p>\n<p>R1(config-subif)#encapsulation dot1Q 100（dot1Q后面加的是该子接口连接的vlan号）</p>\n<p>设置PC机设置正确的网关地址，IP地址的网络位置一定要与网关地址相对应</p>\n","text":"配置端口安全+虚拟局域网技术+三层交换机实现不同vlan间的通信+单臂路由实现vlan间的通信配置端口安全：限制最大连接数1.如果超过1就关闭窗口Switch#config tSwitch(config)#int f0/1Switch(config-if)#sw mode acc","link":"","raw":null,"photos":[],"categories":[],"tags":[]},{"title":"","slug":"ACL访问控制协议","date":"2019-08-20T10:03:20.700Z","updated":"2019-08-20T10:03:20.923Z","comments":true,"path":"api/articles/ACL访问控制协议.json","excerpt":"","keywords":null,"cover":"https://s2.ax1x.com/2019/08/20/mYplLV.png","content":"<hr>\n<h2 id=\"ACL访问控制协议\"><a href=\"#ACL访问控制协议\" class=\"headerlink\" title=\"ACL访问控制协议\"></a>ACL访问控制协议</h2><p><img src=\"https://s2.ax1x.com/2019/08/20/mYplLV.png\" alt></p>\n<p>案例一：禁止学生宿舍行政楼访问财务室</p>\n<p>编号命名标准ACL:</p>\n<p>禁止学生宿舍网络（后面的是掩码反码）</p>\n<p>Router(config)#access-list 10 deny 192.168.10.0 0.0.0.255</p>\n<p>禁止行政楼访问财务室</p>\n<p>Router(config)#access-list 10 deny host 192.168.20.1</p>\n<p>允许其他所有的访问</p>\n<p>Router(config)#access-list 10 permit any</p>\n<p>进入端口，设置out</p>\n<p>Router(config)#int f0/0</p>\n<p>Router(config-if)#ip acc 10 out </p>\n<p>案例二：拒绝学生宿舍访问www服务</p>\n<p>禁止学生宿舍使用tcp协议访问www服务</p>\n<p>Router(config-ext-nacl)#deny tcp 192.168.10.0 0.0.0.255 host 192.168.100.1 eq www</p>\n<p>允许其他的访问</p>\n<p>Router(config-ext-nacl)#peimit ip any any</p>\n<p>进入端口，设置in</p>\n<p>Router(config)#int f0/0</p>\n<p>Router(config-if)#ip acc YY in </p>\n<p>案例三：禁止学生宿舍ping服务器，但是可以访问网站</p>\n<p>禁止学生宿舍ping服务器</p>\n<p>Router(config)#ACCess-list 100 deny icmp 192.168.10.0 0.0.0.255 host 192.168.100.1 echo</p>\n<p>允许其他的访问</p>\n<p>Router(config)#access-list 100 permit ip any any</p>\n<p>进入端口设置in</p>\n<p>Router(config)#int f0/0</p>\n<p>Router(config-if)#ip acc 100 in </p>\n<p>案例四：学生宿舍不可以ping服务器，不能用<a href=\"http://www.gxa.com访问网站，但可以用地址访问网站。\" target=\"_blank\" rel=\"noopener\">www.gxa.com访问网站，但可以用地址访问网站。</a></p>\n<p>设置它为扩展型</p>\n<p>Router(config)#ip access-list extended 100</p>\n<p>禁止ping</p>\n<p>Router(config-ext-nacl)#deny icmp 192.168.10.0 0.0.0.255 192.168.100.0 0.0.0.255 echo</p>\n<p>禁止DNS域名访问</p>\n<p>Router(config-ext-nacl)#deny udp 192.168.10.0 0.0.0.255 192.168.100.0 0.0.0.255 eq domain</p>\n<p>允许其他所有访问</p>\n<p>Router(config-ext-nacl)#permit ip any any</p>\n<p>端口设置in</p>\n<p>Router(config)#int f0/0</p>\n<p>Router(config-if)#ip acc 100 in</p>\n","text":"ACL访问控制协议 [Figure] 案例一：禁止学生宿舍行政楼访问财务室编号命名标准ACL:禁止学生宿舍网络（后面的是掩码反码）Router(config)#access-list 10 deny 192.168.10.0 0.0.0.255禁止行政楼访问财务室Router(c","link":"","raw":null,"photos":[],"categories":[],"tags":[]},{"title":"","slug":"配置路由重分布和路由映射表：","date":"2019-08-20T09:30:11.108Z","updated":"2019-08-20T09:30:11.297Z","comments":true,"path":"api/articles/配置路由重分布和路由映射表：.json","excerpt":"","keywords":null,"cover":"https://s2.ax1x.com/2019/08/20/mJT44f.png","content":"<hr>\n<h2 id=\"路由重分布与路由映射表\"><a href=\"#路由重分布与路由映射表\" class=\"headerlink\" title=\"路由重分布与路由映射表\"></a>路由重分布与路由映射表</h2><p>路由重分布：<br>给rip设置metric值为3，如果不设置，默认为不可达，就通不了其他的协议<br>R1(config)#router rip<br>R1(config-router)#re<br>R1(config-router)#redistribute sta<br>R1(config-router)#redistribute static me<br>R1(config-router)#redistribute static metric 3<br>给R2配置两个不同协议互通<br>R2(config)#router rip<br>R2(config-router)#redistribute eigrp 1<br>R2(config-router)#default-metric 4<br>R2(config)#router eigrp 1<br>R2(config-router)#redistribute rip metric 1000 100 255 1 1500<br>给R3配置不同协议互通：<br>R3(config)#router eigrp 1<br>R3(config-router)#redistribute rip metric 1000 100 255 1 1500<br>R3(config-router)#distance eigrp 90 150（配置eigrp的默认管理距离，内部90，外部150）</p>\n<p>R3(config)#router ospf 1<br>R3(config-router)#redistribute eigrp 1 metric-type 1 subnets<br>R3(config-router)#redistribute maximum-prefix 100 50（100表示最大条目为100 ，50是表示超过最大路由条目的百分之50开始提示，warning-only表示只是提示，并不会限制充分的路由条目）</p>\n<p>策略路由：<br>一、基于源地址的策略路由配置：</p>\n<p><img src=\"https://s2.ax1x.com/2019/08/20/mJT44f.png\" alt></p>\n<p>配置ACL（配置两条规则）<br>R1(config)#access-list 1 permit 172.16.1.2<br>R1(config)#access-list 2 permit 172.16.1.3<br>配置路由映射表<br>R1(config)#route-map CCNA permit 10             （路由映射表名  10）<br>R1(config-route-map)#match ip address 1         （执行1这个规则）<br>R1(config-route-map)#set ip next-hop 172.16.12.2（设定下一跳端口ip）<br>R1(config-route-map)#exit<br>R1(config)#route-map CCNA permit 20<br>R1(config-route-map)#match ip address 2<br>R1(config-route-map)#set ip next-hop 172.16.21.2<br>应用策略路由<br>R1(config)#int f0/0<br>R1(config-if)#ip policy route-map CCNA<br>实验调试：<br>1、查看路由路径(路由追踪)<br>PC2#traceroute 172.16.2.2<br>PC3#traceroute 172.16.2.2<br>2、在R1上显示调试信息<br>R1#debug ip policy<br>PC2：ping 172.16.2.2<br>PC6:ping 172.16.2.2<br>3、显示在哪些接口上应用了策略路由<br>R1#sh ip policy</p>\n<p>二、基于数据包长度的策略路由配置：</p>\n<p><img src=\"https://s2.ax1x.com/2019/08/20/mJ7raq.png\" alt></p>\n<p>配置路由映射表<br>R1(config)#route-map CCNP permit 10<br>R1(config-route-map)#match length 64 100   （设置64-100字节的数据包限制）<br>R1(config-route-map)#set interface s1/0     （指定接口传输数据包）<br>R1(config)#route-map CCNP permit 20<br>R1(config-route-map)#match length 101 1000    （设置101-1000字节数据包）<br>R1(config-route-map)#set interface f0/1          （指定接口）<br>应用策略路由<br>R1(config)#int f0/0<br>R1(config-if)#ip policy route-map CCNP<br>R1(config-if)#exit<br>R1(config)#ip local policy route-map CCNP<br>显示定义的所有路由策略及路由策略匹配的情况<br>R1#sh ip route-map CCNP</p>\n<p>三、基于应用的策略路由配置</p>\n<p><img src=\"https://s2.ax1x.com/2019/08/20/mJ76iV.png\" alt></p>\n<p>配置R2的http与telnet访问<br>R2(config)#ip http server<br>R2(config)#line vty 0 4<br>R2(config-line)#no login<br>R2(config-line)#privilege level 15   （设置优先级）<br>配置扩展ACL<br>R1(config)#ip access-list extended HTTP<br>R1(config-ext-nacl)#permit tcp any any eq 80<br>R1(config-ext-nacl)#exit<br>R1(config)#ip access-list extended TELNET<br>R1(config-ext-nacl)#permit tcp any any eq 23<br>配置路由映射表<br>R1(config)#route-map CCIE permit 10<br>R1(config-route-map)#match ip address HTTP<br>R1(config-route-map)#set ip precedence flash<br>R1(config-route-map)#set ip next-hop 172.16.12.2<br>R1(config)#route-map CCIE permit 20<br>R1(config-route-map)#match ip address TELNET<br>R1(config-route-map)#set ip precedence critical<br>R1(config-route-map)#set ip next-hop 172.16.21.2<br>应用路由映射表<br>R1(config)#int f0/0<br>R1(config-if)#ip policy route-map CCIE<br>R1(config)#ip local policy route-map CCIE</p>\n","text":"路由重分布与路由映射表路由重分布：<br>给rip设置metric值为3，如果不设置，默认为不可达，就通不了其他的协议<br>R1(config)#router rip<br>R1(config-router)#re<br>R1(config-router)#redistribu","link":"","raw":null,"photos":[],"categories":[],"tags":[]},{"title":"","slug":"配置OSPF动态路由","date":"2019-08-20T09:18:23.000Z","updated":"2019-08-20T09:18:23.239Z","comments":true,"path":"api/articles/配置OSPF动态路由.json","excerpt":"","keywords":null,"cover":"https://s2.ax1x.com/2019/08/20/mJhDVf.png","content":"<hr>\n<h2 id=\"OSPF路由协议（链路状态\"><a href=\"#OSPF路由协议（链路状态\" class=\"headerlink\" title=\"OSPF路由协议（链路状态\"></a>OSPF路由协议（链路状态</h2><p>）<br>工业标准，工作在网络层<br>组播地址：224.0.0.5 224.0.0.6<br>OSPF概述：<br>通过交换Hello数据包来建立邻居关系<br>以传播LSA代替路由表更新<br>      链路：路由器接口<br>      状态：描述接口以及他与邻居路由器的关系<br>  将LSA    泛洪到所有区域的OSPF路由器，而不是单独的一个<br>  分为三张表：<br>            邻居表<br>            数据库<br>            路由表<br>OSPF分层路由：基于端口划分区域<br>主干路由器（BR）<br>区域边界路由器（ABR）<br>自治系统边界路由器（ASBR）<br>划分区域的好处：<br>减少路由表的路由条目<br>拓扑发生改变时，只影响本区域的数据库<br>每个30分钟泛数据库信息（周期与触发更新）只在本区域泛洪<br>使用OSPF配置负载均衡：<br>默认情况下，最多可在路由表中加入四条等价路径：<br>     可以最多配置16条路径<br>    (config-router)# maximum-paths<value><br>    可以更改特殊链路的开销以确保路径等价于负载均衡：<br>    (config-if)#ip ospf cost <vlaue><br>配置身份认证：<br>   （1）配置明文认证<br>        R1(config-if)#ip ospf authentication-key ccie   设置明文密码，两端口密码要一致<br>        R1(config-if)#ip ospf authentication     开启认证<br>   （2）配置密码认证<br>        R1(config-if)#ip ospf message-digest-key 1 md5 ccie<br>        R1(config-if)#ip ospf authentication<br>   （3）配置区域认证<br>        R1(config-if)#ip ospf message-digest-key 1 md5 ccie<br>        R1(config-router)#area 1 authentication message-digest<br>        区域明文认证<br>        R1(config-if)#ip ospf authentication-key ccie<br>        R1(config-router)#area 1 authentication<br>查看是否配置ospf:sh ip protocols<br>查看邻居表：sh ip ospf neighbor<br>查看链路状态数据库（拓朴表）：sh ip ospf database<br>查看路由表：sh ip route /sh ip route ospf<br>查看ospf进程及相关信息：sh ip ospf<br>查看运行ospf接口的信息：sh ip ospf interface f0/0<br>路由汇总：<br>R2(config-router)#area 1 range 172.16.0.0 255.255.255.252<br>路由重分配<br>R3(config)#router ospf 1<br>R3(config-router)#redistribute eigrp 1 subnets 默认为 metric-type 2  OE2,Metric为20，不累加<br>R3(config-router)#redistribute eigrp 1 metric-type 1 metric 100 subnets  metric-type 1  OE1<br>R3(config)#router eigrp 1<br>R3(config-router)#redistri bute ospf 1 metric 1000 100 255 1 1500（带宽 延迟 可靠性 负载 MTU（最大传输单元））<br>配置外部自治系统路由汇总<br>R3(config)#router ospf 1<br>R3(config-router)#summary-address 192.168.0.0 255.255.252.0<br>在R2上看路由表，会发现有一条路由为：<br>172.16.0.0/22 is a summary, 00:12:06, Null0<br>为避免一路，请使用以下命令：<br>R2(config-router)#no discard-route<br>OSPF的路由类型：<br>O    ：域内路由<br>O/A  ；域间路由<br>OE1  :域外路由  会累加METRIC值<br>OE2  :域外路由，不累加METRIC值默认20，由外部重分布进来默认使用OE2</vlaue></value></p>\n<p>最短路径优先算法（SPF Calculation）<br>Cost=108/BW（b/s)<br>metric值=所有目的地址到达本地路由器的入接口的cost值之和<br>metric值=所有本地路由器到达目的地址的路由器的出接口的cost值之和<br>也可以使用命令sh ip ospf interface loopback 0 查看接口的cost值 </p>\n<p><img src=\"https://s2.ax1x.com/2019/08/20/mJhDVf.png\" alt></p>\n","text":"OSPF路由协议（链路状态）<br>工业标准，工作在网络层<br>组播地址：224.0.0.5 224.0.0.6<br>OSPF概述：<br>通过交换Hello数据包来建立邻居关系<br>以传播LSA代替路由表更新<br>      链路：路由器接口<br>      状态：描","link":"","raw":null,"photos":[],"categories":[],"tags":[]},{"title":"","slug":"PVST生成树协议","date":"2019-08-17T09:54:57.548Z","updated":"2019-08-17T09:54:57.738Z","comments":true,"path":"api/articles/PVST生成树协议.json","excerpt":"","keywords":null,"cover":null,"content":"<p>PVST 生成树协议</p>\n<p>1、什么是PVST</p>\n<p>PVST是Cisco私有的，为每个VLAN构造一棵生成树</p>\n<p>2、PVST在实际中的应用</p>\n<p>配置网络中比较稳定的交换机为根网桥</p>\n<p>利用PVST实现网络的负载分担</p>\n<p>3、PVST的配置</p>\n<p>命令启用生成树：Switch(config)#spanning-tree vlan vlan-list</p>\n<p>设置根网桥：Switch(config)#spanning-tree vlan vlan-list root primary | secondary</p>\n<p>-设置为primary后，优先级变成24576</p>\n<p>-设置为secondary后， 优先级变成28672</p>\n<p>修改网桥的优先级：Switch(config)#spanning-tree vlan vlan-list priority Bridge-priority </p>\n<p>-优先级的值为4096的倍数</p>\n<p>修改端口成本：Switch(config-if)#spanning-tree vlan vlan-list cost cost</p>\n<p>修改端口优先级：Switch(config-if)#spanning-tree vlan vlan-list port-priority priority</p>\n<p>配置上行速链路：Switch(config)#spanning-tree uplinkfast</p>\n<p>配置端口速链路：Switch(config-if)#spanning-tree portfast</p>\n<p>查看生成树的配置：Switch#show spanning-tree</p>\n<p>查看某个VLAN的生成树详细信息：Switch#show spanning-tree vlan vlan-id detail</p>\n<p><strong>三、**</strong>以太网端口聚合**</p>\n<p><strong>1、**</strong>什么是端口聚合？**</p>\n<p>链路聚合又称为端口聚合，端口捆绑，英文名porttrunking。是一种聚合多个物理接口 ( that ) 创建一个逻辑接口。你可以捆扎( bundle ) 八个单独的活动链接到一个信道端口，以提供更高的<strong>带宽</strong>和<strong>冗余</strong>。端口通道也负载平衡这些物理接口上的通信量。只要端口通道中的至少一个物理接口可操作，端口通道就可以保持运行。</p>\n<p><strong>2、**</strong>channel-group** <strong>模式</strong></p>\n<p>PAgP 是 Cisco私有，只能在 Cisco Switch 上设定，PAgP 有两个模式，分別是 Desirable 与 Auto当 PAgP 成功建立 EtherChannel 后，PAgP Message 会继续定时传送去维持 EtherChannel。</p>\n<p>Desirable  Auto</p>\n<p>Desirable    √         √   主动发送PAgP报文</p>\n<p>Auto        √         x   被动发送PAgP报文</p>\n<p>On                        手动设置，需要两边都设置</p>\n<p>LACP 是 IEEE Standard</p>\n<p>Active  Passive</p>\n<p>Active        √         √   主动发送LACP报文</p>\n<p>Passive       √         x    主动接收LACP报文</p>\n<p><strong>3、**</strong>channel-group<strong>**说明</strong></p>\n<p>（1）Cisco最多允许EtherChannel绑定8个端口；如果是百兆网络，总带宽可达1.6Gbit/s；如果是千兆网络，总带宽可达16Gbit/s。</p>\n<p>（2）EtherChannel不支持10M端口；</p>\n<p>（3）EtherChannel编号只在本地有效，链路两端的编号可以不一样；</p>\n<p>（4）EtherChannel默认使用PAgP协议；</p>\n<p>（5）EtherChannel默认情况下是基于源MAC地址的负载平衡；</p>\n<p>（6）一个EtherChannel内所有的端口都必须具有相同的端口速率和双工模式，LACP只能是全双工模式；</p>\n<p>（7）channel-group接口会自动继承最小物理接口，或最先配置的接口模式；</p>\n<p>（8）cisco的交换机不仅可以支持第二层EtherChannel,还可以支持第三层EtherChannel。</p>\n<p><strong>4、配置端口聚合</strong></p>\n<p>Switch(config)#int port-channel 1</p>\n<p>Switch(config-if)#switchport mode trunk</p>\n<p>Switch(config)#int range f0/1-2</p>\n<p>Switch(config-if-range)#channel-group 1 mode on</p>\n<p><strong>5、配置流量均衡</strong></p>\n<p>Switch(config)#int f0/1</p>\n<p>Switch(config-if)#spanning-tree vlan 10 port-priority 16</p>\n<p>Switch(config-if)#spanning-tree vlan 20 port-priority 32</p>\n<p>Switch(config)#int f0/2</p>\n<p>Switch(config-if)#spanning-tree vlan 10 port-priority 32</p>\n<p>Switch(config-if)#spanning-tree vlan 20 port-priority 16</p>\n","text":"PVST 生成树协议1、什么是PVSTPVST是Cisco私有的，为每个VLAN构造一棵生成树2、PVST在实际中的应用配置网络中比较稳定的交换机为根网桥利用PVST实现网络的负载分担3、PVST的配置命令启用生成树：Switch(config)#spanning-tree vl","link":"","raw":null,"photos":[],"categories":[],"tags":[]},{"title":"","slug":"热备份路由协议","date":"2019-08-17T09:31:05.062Z","updated":"2019-08-17T09:31:05.245Z","comments":true,"path":"api/articles/热备份路由协议.json","excerpt":"","keywords":null,"cover":"https://t1.picb.cc/uploads/2019/08/17/gNzXsL.png","content":"<p><strong>热备份路由协议</strong></p>\n<p><a href=\"https://baike.baidu.com/item/热备份路由协议/4389963\" target=\"_blank\" rel=\"noopener\"><strong>热备份路由协议</strong></a><strong>(**</strong>HSRP<strong>**)</strong></p>\n<p>是思科推出的用于建立容错<a href=\"https://baike.baidu.com/item/默认网关/2152622\" target=\"_blank\" rel=\"noopener\">默认网关</a>的专有<a href=\"https://baike.baidu.com/item/冗余协议/2828235\" target=\"_blank\" rel=\"noopener\">冗余协议</a>，由RFC 2281进行描述。</p>\n<p><strong>虚拟路由</strong><a href=\"https://baike.baidu.com/item/冗余协议\" target=\"_blank\" rel=\"noopener\"><strong>冗余协议</strong></a><strong>(**</strong>VRRP<strong>**)</strong></p>\n<p>是基于标准的HSRP替代协议，由IETF标准RFC 3768进行描述。这两种技术在概念上相似，但互不兼容。</p>\n<p>** 工作原理**</p>\n<p>HSRP在网络<a href=\"https://baike.baidu.com/item/路由器\" target=\"_blank\" rel=\"noopener\">路由器</a>之间建立<a href=\"https://baike.baidu.com/item/默认网关\" target=\"_blank\" rel=\"noopener\">默认网关</a>的倒换框架，当主<a href=\"https://baike.baidu.com/item/网关\" target=\"_blank\" rel=\"noopener\">网关</a>不可达时进行切换。此协议经常与快速会聚路由协议EIGRP或OSPF<a href=\"https://baike.baidu.com/item/协同工作\" target=\"_blank\" rel=\"noopener\">协同工作</a>。HSRP使用<a href=\"https://baike.baidu.com/item/多播地址\" target=\"_blank\" rel=\"noopener\">多播地址</a>224.0.0.2和UDP端口1985向其他启用HSRP协议的<a href=\"https://baike.baidu.com/item/路由器\" target=\"_blank\" rel=\"noopener\">路由器</a>发送HELLO<a href=\"https://baike.baidu.com/item/报文\" target=\"_blank\" rel=\"noopener\">报文</a>，来交流路由器间的优先级。配置有最高优先级的主路由器将成为<a href=\"https://baike.baidu.com/item/虚拟路由器\" target=\"_blank\" rel=\"noopener\">虚拟路由器</a>，以预先配置好的<a href=\"https://baike.baidu.com/item/网关\" target=\"_blank\" rel=\"noopener\">网关</a>IP和MAC地址0000.0c07.acXX（XX是组IP的十六进制值）回应局域网对网关的ARP的请求。如果主<a href=\"https://baike.baidu.com/item/路由器\" target=\"_blank\" rel=\"noopener\">路由器</a>宕机，次优先级路由器将接管<a href=\"https://baike.baidu.com/item/网关\" target=\"_blank\" rel=\"noopener\">网关</a>IP并以同样的MAC地址回应ARP的请求，这样就实现了透明的<a href=\"https://baike.baidu.com/item/默认网关\" target=\"_blank\" rel=\"noopener\">默认网关</a>自动倒换。</p>\n<p>热备份路由协议确保在某一时间内只有一台路由器（称为主动路由器）以虚拟路由器的名义转发数据包。备份路由器被选择，并时刻准备成为主动路由器（在当前主动路由器失效的情况下）。热备份路由协议定义了一种通过IP地址来确定主动和备份路由器的<a href=\"https://baike.baidu.com/item/机制\" target=\"_blank\" rel=\"noopener\">机制</a>。一旦这些<a href=\"https://baike.baidu.com/item/确定\" target=\"_blank\" rel=\"noopener\">确定</a>了，一个主动路由器出故障就不会出现重大的连接中断现象。</p>\n<p>在任何特定的网络中，可能有多个，也可能是重叠的，热备份群，每一个都有单一的媒体访问控制（MAC）地址和IP地址；IP地址应该属于初级子网，但它必须与实际或虚拟的地址（分配给网络中路由器或主机的地址）不同。 [1] </p>\n<p>HSRP和VRRP都不是路由协议，因为它们不发布IP路由也不影响<a href=\"https://baike.baidu.com/item/路由表\" target=\"_blank\" rel=\"noopener\">路由表</a>。</p>\n<p>3、HSRP配置</p>\n<p><img src=\"https://t1.picb.cc/uploads/2019/08/17/gNzXsL.png\" alt></p>\n","text":"热备份路由协议热备份路由协议(**HSRP**)是思科推出的用于建立容错默认网关的专有冗余协议，由RFC 2281进行描述。虚拟路由冗余协议(**VRRP**)是基于标准的HSRP替代协议，由IETF标准RFC 3768进行描述。这两种技术在概念上相似，但互不兼容。** 工作原理","link":"","raw":null,"photos":[],"categories":[],"tags":[]},{"title":"","slug":"1、静态路由","date":"2019-08-17T09:18:31.255Z","updated":"2019-08-17T09:24:11.437Z","comments":true,"path":"api/articles/1、静态路由.json","excerpt":"","keywords":null,"cover":"https://t1.picb.cc/uploads/2019/08/17/gNzaHa.png","content":"<p> <strong>1、静态路由</strong></p>\n<p>指定一条可以到达目标网络的路径</p>\n<p>Router(config)#ip route network    [mask]{address | interface}[distance] [permanent]</p>\n<p>这是一个单方向的路由. 你必须配置一条反方向的路由</p>\n<p><strong>2、静态汇总路由</strong></p>\n<p><strong>3、静态默认（缺省）路由</strong></p>\n<p><strong>4、静态选择路由</strong></p>\n<p><strong>5、浮动静态路由</strong></p>\n<p><strong>6、用静态路由实现负载均衡</strong></p>\n<p><img src=\"https://t1.picb.cc/uploads/2019/08/17/gNzaHa.png\" alt></p>\n","text":" 1、静态路由指定一条可以到达目标网络的路径Router(config)#ip route network    [mask]{address | interface}[distance] [permanent]这是一个单方向的路由. 你必须配置一条反方向的路由2、静态汇总路由3","link":"","raw":null,"photos":[],"categories":[],"tags":[]}]}