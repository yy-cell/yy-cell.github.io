{"title":"","slug":"单臂路由、三层交换机实现vlan间通信","date":"2019-08-20T10:32:04.765Z","updated":"2019-08-20T10:32:05.054Z","comments":true,"path":"api/articles/单臂路由、三层交换机实现vlan间通信.json","photos":[],"link":"","excerpt":null,"covers":["https://s2.ax1x.com/2019/08/20/mYCy2d.png","https://s2.ax1x.com/2019/08/20/mYiCtS.png","https://s2.ax1x.com/2019/08/20/mYiA6s.png","https://s2.ax1x.com/2019/08/20/mYie00.png","https://s2.ax1x.com/2019/08/20/mYiukT.png"],"content":"<hr>\n<h2 id=\"配置端口安全-虚拟局域网技术-三层交换机实现不同vlan间的通信-单臂路由实现vlan间的通信\"><a href=\"#配置端口安全-虚拟局域网技术-三层交换机实现不同vlan间的通信-单臂路由实现vlan间的通信\" class=\"headerlink\" title=\"配置端口安全+虚拟局域网技术+三层交换机实现不同vlan间的通信+单臂路由实现vlan间的通信\"></a>配置端口安全+虚拟局域网技术+三层交换机实现不同vlan间的通信+单臂路由实现vlan间的通信</h2><p>配置端口安全：限制最大连接数1.如果超过1就关闭窗口</p>\n<p>Switch#config t</p>\n<p>Switch(config)#int f0/1</p>\n<p>Switch(config-if)#sw mode access  （设置端口模式为接入模式）</p>\n<p>Switch(config-if)#switchport port-security</p>\n<p>Switch(config-if)#switchport port-security maximum 1</p>\n<p>Switch(config-if)#switchport port-security violation shutdown</p>\n<p>配置端口安全：绑定MAC地址如果违规就关闭窗口</p>\n<p>Switch(config)#int f 0/2</p>\n<p>Switch(config-if)#sw mo acc（设置端口模式为接口模式）</p>\n<p>Switch(config-if)#switchport port-security</p>\n<p>Switch(config-if)#switchport port-security mac-address 0001.97C4.B26E（设置固定的MAC地址，只允许它访问）</p>\n<p>Switch(config-if)#switchport port-security violation shutdown（设置如果不是规定的MAC地址就关闭窗口 f0/2）</p>\n<p>Vlan（虚拟局域网）技术：</p>\n<p>1、默认情况下交换机的所有端口都在vlan1中</p>\n<p>Switch#sh vlan brief 或者Switch#sh vlan(查看交换机vlan)</p>\n<p>修改用户名：Switch(config)#hostname SW1</p>\n<p>创建两个vlan以及名字</p>\n<p>SW1(config)#vlan 10</p>\n<p>SW1(config-vlan)#</p>\n<p>SW1(config-vlan)#name rsb</p>\n<p>SW1(config-vlan)#vlan 20</p>\n<p>SW1(config-vlan)#name xsb</p>\n<p>修改用户名</p>\n<p>SW2(config)#vlan 10</p>\n<p>SW2(config-vlan)#name rsb</p>\n<p>SW2(config-vlan)#vlan 20</p>\n<p>SW2(config-vlan)#name xsb</p>\n<p>将对应端口放入对应的vlan</p>\n<p>二交换机是不能实现不同广播之间通信的，如果要实现不同的vlan进行通信必须要是有三层设备（路由器或者三层交换）</p>\n<p>方法一：使用三层交换机进行不同的vlan的通信。</p>\n<p>第一步：先在三层交换机上面划分vlan间的通信,先修改用户为SW3</p>\n<p><img src=\"https://s2.ax1x.com/2019/08/20/mYCy2d.png\" alt></p>\n<p>第二步修改trunk,但是显示需要封装，所以先去封装，再次trunk模式</p>\n<p><img src=\"https://s2.ax1x.com/2019/08/20/mYiCtS.png\" alt></p>\n<p><img src=\"https://s2.ax1x.com/2019/08/20/mYiA6s.png\" alt></p>\n<p>为svi虚拟接口配置IP地址分别作为不同的vlan的网关并且开启路由功能然后为计算机配置网关地址（IP一定要与网管地址的网络位相同）</p>\n<p><img src=\"https://s2.ax1x.com/2019/08/20/mYie00.png\" alt></p>\n<p>方法二:</p>\n<p>使用路由器实现vlan间的通信（单臂路由）</p>\n<p><img src=\"https://s2.ax1x.com/2019/08/20/mYiukT.png\" alt></p>\n<p>第一步：划分vlan</p>\n<p>第二部：将端口加入vlan（将1到10的端口都加入到vlan100中，11到22的多安康都加入到vlan20中）</p>\n<p>第三部：设置trunk：</p>\n<p>第四部：将路由端口开启</p>\n<p>第五步：开启子接口并封装为dot1q标准，设置IP地址分别为vlan100 vlan200网关</p>\n<p>R1(config)#int f0/0.100（跟vlan100对应）</p>\n<p>R1(config-subif)#encapsulation dot1Q 100（dot1Q后面加的是该子接口连接的vlan号）</p>\n<p>设置PC机设置正确的网关地址，IP地址的网络位置一定要与网关地址相对应</p>\n","categories":[],"tags":[]}