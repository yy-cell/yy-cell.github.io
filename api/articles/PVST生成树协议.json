{"title":"","slug":"PVST生成树协议","date":"2019-08-17T09:54:57.548Z","updated":"2019-08-17T09:54:57.738Z","comments":true,"path":"api/articles/PVST生成树协议.json","photos":[],"link":"","excerpt":null,"covers":null,"content":"<p>PVST 生成树协议</p>\n<p>1、什么是PVST</p>\n<p>PVST是Cisco私有的，为每个VLAN构造一棵生成树</p>\n<p>2、PVST在实际中的应用</p>\n<p>配置网络中比较稳定的交换机为根网桥</p>\n<p>利用PVST实现网络的负载分担</p>\n<p>3、PVST的配置</p>\n<p>命令启用生成树：Switch(config)#spanning-tree vlan vlan-list</p>\n<p>设置根网桥：Switch(config)#spanning-tree vlan vlan-list root primary | secondary</p>\n<p>-设置为primary后，优先级变成24576</p>\n<p>-设置为secondary后， 优先级变成28672</p>\n<p>修改网桥的优先级：Switch(config)#spanning-tree vlan vlan-list priority Bridge-priority </p>\n<p>-优先级的值为4096的倍数</p>\n<p>修改端口成本：Switch(config-if)#spanning-tree vlan vlan-list cost cost</p>\n<p>修改端口优先级：Switch(config-if)#spanning-tree vlan vlan-list port-priority priority</p>\n<p>配置上行速链路：Switch(config)#spanning-tree uplinkfast</p>\n<p>配置端口速链路：Switch(config-if)#spanning-tree portfast</p>\n<p>查看生成树的配置：Switch#show spanning-tree</p>\n<p>查看某个VLAN的生成树详细信息：Switch#show spanning-tree vlan vlan-id detail</p>\n<p><strong>三、**</strong>以太网端口聚合**</p>\n<p><strong>1、**</strong>什么是端口聚合？**</p>\n<p>链路聚合又称为端口聚合，端口捆绑，英文名porttrunking。是一种聚合多个物理接口 ( that ) 创建一个逻辑接口。你可以捆扎( bundle ) 八个单独的活动链接到一个信道端口，以提供更高的<strong>带宽</strong>和<strong>冗余</strong>。端口通道也负载平衡这些物理接口上的通信量。只要端口通道中的至少一个物理接口可操作，端口通道就可以保持运行。</p>\n<p><strong>2、**</strong>channel-group** <strong>模式</strong></p>\n<p>PAgP 是 Cisco私有，只能在 Cisco Switch 上设定，PAgP 有两个模式，分別是 Desirable 与 Auto当 PAgP 成功建立 EtherChannel 后，PAgP Message 会继续定时传送去维持 EtherChannel。</p>\n<p>Desirable  Auto</p>\n<p>Desirable    √         √   主动发送PAgP报文</p>\n<p>Auto        √         x   被动发送PAgP报文</p>\n<p>On                        手动设置，需要两边都设置</p>\n<p>LACP 是 IEEE Standard</p>\n<p>Active  Passive</p>\n<p>Active        √         √   主动发送LACP报文</p>\n<p>Passive       √         x    主动接收LACP报文</p>\n<p><strong>3、**</strong>channel-group<strong>**说明</strong></p>\n<p>（1）Cisco最多允许EtherChannel绑定8个端口；如果是百兆网络，总带宽可达1.6Gbit/s；如果是千兆网络，总带宽可达16Gbit/s。</p>\n<p>（2）EtherChannel不支持10M端口；</p>\n<p>（3）EtherChannel编号只在本地有效，链路两端的编号可以不一样；</p>\n<p>（4）EtherChannel默认使用PAgP协议；</p>\n<p>（5）EtherChannel默认情况下是基于源MAC地址的负载平衡；</p>\n<p>（6）一个EtherChannel内所有的端口都必须具有相同的端口速率和双工模式，LACP只能是全双工模式；</p>\n<p>（7）channel-group接口会自动继承最小物理接口，或最先配置的接口模式；</p>\n<p>（8）cisco的交换机不仅可以支持第二层EtherChannel,还可以支持第三层EtherChannel。</p>\n<p><strong>4、配置端口聚合</strong></p>\n<p>Switch(config)#int port-channel 1</p>\n<p>Switch(config-if)#switchport mode trunk</p>\n<p>Switch(config)#int range f0/1-2</p>\n<p>Switch(config-if-range)#channel-group 1 mode on</p>\n<p><strong>5、配置流量均衡</strong></p>\n<p>Switch(config)#int f0/1</p>\n<p>Switch(config-if)#spanning-tree vlan 10 port-priority 16</p>\n<p>Switch(config-if)#spanning-tree vlan 20 port-priority 32</p>\n<p>Switch(config)#int f0/2</p>\n<p>Switch(config-if)#spanning-tree vlan 10 port-priority 32</p>\n<p>Switch(config-if)#spanning-tree vlan 20 port-priority 16</p>\n","categories":[],"tags":[]}